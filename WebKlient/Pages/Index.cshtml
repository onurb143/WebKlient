@page
@model WebKlient.Pages.IndexModel
@{
    ViewData["Title"] = "JWT Generator";
}

<h1>JWT Generator</h1>

<p>Klik på knappen nedenfor for at generere en JWT, som kan bruges i resten af systemet.</p>

<form method="post" asp-page-handler="FetchJwt">
    <button type="submit">Hent JWT</button>
</form>

@if (!string.IsNullOrEmpty(Model.JwtToken))
{
    <script>
        // Gem JWT-token i Local Storage
        localStorage.setItem('jwtToken', '@Model.JwtToken');
        console.log('JWT gemt i Local Storage: @Model.JwtToken');
    </script>

    <h2>Din JWT</h2>
    <textarea style="width: 100%; height: 200px;" readonly>@Model.JwtToken</textarea>
}

}
else if (!string.IsNullOrEmpty(Model.Message))
{
    <p style="color: red;">@Model.Message</p>
}
